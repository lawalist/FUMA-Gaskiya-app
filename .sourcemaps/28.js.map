{"version":3,"sources":["../../src/pages/tabs/tabs.ts","../../src/pages/tabs/tabs.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAkD;AAElD;;;;;;EAME;AACF,uDAAuD;AACW;AACV;AACA;AACxD;;;;;EAKE;AAMF;IAqBE,kBAAmB,SAA2B,EAAU,QAAyB,EAAU,IAAY;QAApF,cAAS,GAAT,SAAS,CAAkB;QAAU,aAAQ,GAAR,QAAQ,CAAiB;QAAU,SAAI,GAAJ,IAAI,CAAQ;QAnBvG,8BAA8B;QAE9B,gCAAgC;QAChC,0BAA0B;QAC1B,IAAI;QAEJ,6EAA6E;QAC7E,aAAQ,GAAQ,UAAU,CAAC;QAC3B,aAAQ,GAAQ,YAAY,CAAC;QAC7B,aAAQ,GAAQ,cAAc,CAAC;QAC/B,8BAA8B;QAC9B,aAAQ,GAAQ,aAAa,CAAC;QAC9B,aAAQ,GAAQ,WAAW,CAAC;QAC5B,aAAQ,GAAQ,cAAc,CAAC;QAC/B,cAAS,GAAQ,YAAY,CAAC;QAC9B,cAAS,GAAQ,QAAQ,CAAC;QAKxB,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,0EAAM,CAAC,MAAM,CAAC;IAC9C,CAAC;IAEM,kCAAe,GAAtB;QAAA,iBAWC;QAVC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,0EAAM,CAAC,MAAM,CAAC;QACjC,iCAAiC;QACjC,uBAAuB;QACvB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,SAAS,CAAC,cAAI;YAC9C,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC;gBACZ,4BAA4B;YAC9B,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAGD,4BAAS,GAAT;QACE,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC;YAC5C,IAAG,CAAC,EAAC;gBACD,0EAAM,CAAC,UAAU,CAAC,aAAa,GAAG,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC;gBACvD,0EAAM,CAAC,UAAU,CAAC,cAAc,GAAG,CAAC,CAAC,IAAI,CAAC,cAAc;aACzD;QACL,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG,IAAK,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;IACtC,CAAC;IAED,6BAAU,GAAV;QAAA,iBAMC;QALC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC;YACpD,IAAG,CAAC,CAAC,EAAC;gBACF,KAAI,CAAC,oBAAoB,EAAE;aAC5B;QACL,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG,IAAK,YAAI,CAAC,oBAAoB,EAAE,EAA3B,CAA2B,CAAC,CAAC;IACjD,CAAC;IAID,uCAAoB,GAApB;QAAA,iBA2IK;QA1IH,IAAI,UAAU,GAAQ;YACpB,qEAAqE;YACjE,GAAG,EAAE,oBAAoB;YACzB,OAAO,EAAE;gBACP,QAAQ,EAAE,UAAU,GAAG,EAAE,GAAG;oBAC1B,IAAI,eAAe,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,aAAa,EAAE,SAAS,EAAE,WAAW,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;oBAC/H,IAAI,mBAAmB,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,CAAC,CAAC;oBACvF,IAAI,uBAAuB,GAAG,CAAC,WAAW,EAAE,mBAAmB,EAAE,YAAY,CAAC,CAAC;oBAG/E;;;2BAGO;oBACP,0EAA0E;oBAC1E,IAAG,GAAG,CAAC,GAAG,IAAI,oBAAoB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,IAAI,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAC;wBACzK,OAAO,CAAC;qBACT;;oBACD,mBAAmB;oBACnB,IAAG,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAC;wBAE9C,oBAAoB;wBACpB,IAAG,GAAG,CAAC,IAAI,EAAC;4BACV,uBAAuB;4BACvB,IAAG,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC;gCAC1C,OAAO,CAAC,CAAC;6BACV;4BAED,mDAAmD;iCAC9C,IAAG,GAAG,CAAC,IAAI,IAAI,OAAO,EAAC;gCAC1B,wCAAwC;gCACxC,IAAG,GAAG,CAAC,KAAK,CAAC,SAAS,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,OAAO,EAAC;oCACtE,OAAO,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;iCACxD;qCAAM,gCAAgC;iCACvC,IAAG,GAAG,CAAC,KAAK,CAAC,YAAY,IAAI,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,UAAU,EAAC;oCAC/E,OAAO,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;iCAC9D;;;mCAGE;6BACJ;iCAAI;gCACH,wCAAwC;gCACxC,MAAK,CAAC,EAAC,SAAS,EAAE,uBAAuB,GAAC,GAAG,CAAC,GAAG,EAAC,CAAC;6BACpD;yBACF;wBAGD,8DAA8D;6BACzD,IAAG,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,EAAC;4BAChC,uBAAuB;4BACvB,IAAG,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,cAAc,IAAI,GAAG,CAAC,KAAK,CAAC,KAAK,IAAI,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAC;gCAClF,OAAO,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;6BACtF;;4BACD,sCAAsC;4BACtC,IAAG,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC;gCAC/C,OAAO,CAAC,CAAC;6BACV;;4BACD,oBAAoB;4BACpB,IAAG,uBAAuB,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC;gCACvD,kBAAkB;gCAClB,IAAG,GAAG,CAAC,KAAK,CAAC,gBAAgB,IAAI,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,WAAW,EAAC;oCACrG,kBAAkB;oCAClB,OAAO,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;iCACjE;qCACD,IAAG,GAAG,CAAC,KAAK,CAAC,gBAAgB,IAAI,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,WAAW,EAAC;oCACrG,0CAA0C;oCAC1C,OAAO,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;iCAC3E;;oCACD,eAAe;oCACb,OAAO,CAAC,CAAC;6BACZ;;4BACD,2IAA2I;4BAC3I,IAAG,mBAAmB,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAC;gCAEjD,wCAAwC;gCACvC,IAAG,GAAG,CAAC,KAAK,CAAC,YAAY,IAAI,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,EAAC;oCAC1I,4CAA4C;oCAC5C,IAAG,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,GAAG,CAAC,KAAK,CAAC,gBAAgB,IAAI,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAC;wCACjG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;qCACnM;yCAAI;wCACH,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;qCAC7H;iCACF;qCAAM,gCAAgC;iCACvC,IAAG,GAAG,CAAC,KAAK,CAAC,YAAY,IAAI,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,UAAU,EAAC;oCAEpF,wCAAwC;oCAC1C,gFAAgF;oCAC9E,4CAA4C;oCAC5C,IAAG,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,GAAG,CAAC,KAAK,CAAC,gBAAgB,IAAI,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAC;wCACjG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;qCAC3I;yCAAI;wCACH,OAAO,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;qCACnE;oCACH,GAAG;oCACH;;;uCAGG;iCACN;qCAAI;oCACH,6DAA6D;oCAC7D,mBAAmB;iCACpB;6BACF;iCAAI;gCACH,qDAAqD;6BACtD;4BAED,gBAAgB;yBAEjB,eAAc;qBAChB,kBAAiB;gBAClB,CAAC,CAAC,QAAQ,EAAE;aACb;SACF;QAED,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;YACtD,IAAG,GAAG,IAAI,GAAG,CAAC,GAAG,EAAC;gBAChB,YAAY;gBACZ,2BAA2B;gBAC3B,UAAU,CAAC,GAAG,GAAG,oBAAoB,CAAC;gBACtC,UAAU,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;gBAC3B,KAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC,mIAAkI;aACnL;iBAAI;gBACH,yBAAyB;gBACzB,0BAA0B;gBAC1B,UAAU,CAAC,GAAG,GAAG,oBAAoB,CAAC;gBACtC,KAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC,8GAA6G;aAC9J;QAEH,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG;YACX,YAAY;YACZ,0BAA0B;YAC1B,UAAU,CAAC,GAAG,GAAG,oBAAoB,CAAC;YACtC,KAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC,2GAA0G;QAC5J,CAAC,CAAC,CAAC;QAGH,sFAAsF;QACtF,kFAAkF;IACpF,CAAC;IArMM,QAAQ;QAJpB,gEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACG;SACzB,CAAC;iBAsBuG;OArB5F,QAAQ,CAsMpB;IAAD,CAAC;AAAA;SAtMY,QAAQ,e;;;;;;;;;;;;;;;;;;;;ACxBoB;AACO;AACd;AAClC,wEAAwE;AACD;AAOvE;IAAA;IAA8B,CAAC;IAAlB,cAAc;QAL1B,+DAAQ,CAAC;YACR,YAAY,EAAE,CAAC,uDAAQ,CAAC;YACxB,OAAO,EAAE,CAAC,4EAAe,EAAE,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC,CAAC;YAC9D,OAAO,EAAE,CAAC,uDAAQ,CAAC;SACpB,CAAC;OACW,cAAc,CAAI;IAAD,qBAAC;CAAA;AAAJ","file":"28.js","sourcesContent":["import { Component, NgZone } from '@angular/core';\r\nimport { NavController, IonicPage } from 'ionic-angular';\r\n/*\r\nimport { HomePage } from './home/home';\r\nimport { CollectPage } from './collect/collect';\r\nimport { ResearchPage } from './research/research';\r\nimport { ProfilePage } from './profile/profile';\r\nimport { AdminPage } from './admin/admin';\r\n*/\r\n//import { FormViewPage } from '../form-view/form-view'\r\nimport { PouchdbProvider } from '../../providers/pouchdb-provider'\r\nimport { TranslateService  } from '@ngx-translate/core';\r\nimport { global } from '../../global-variables/variable'\r\n/*\r\nimport { UnionsPage } from '../unions/unions'\r\nimport { OpPage } from '../op/op'\r\nimport { MembresPage } from '../membres/membres'\r\nimport { EssaiPage } from '../essai/essai';\r\n*/\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-tabs',\r\n  templateUrl: 'tabs.html'\r\n})  \r\nexport class TabsPage {\r\n  \r\n  // public showFormTab = false;\r\n\r\n  // onShowForm(agreed: boolean) {\r\n  //   this.showFormTab=true\r\n  // }\r\n\r\n  // include formview as unselectable tab to keep window open after form filled\r\n  tab1Root: any = 'HomePage';\r\n  tab2Root: any = 'Essai1Page';\r\n  tab3Root: any = 'ResearchPage';\r\n  //tab4Root: any = ProfilePage;\r\n  tab4Root: any = 'MembresPage';\r\n  tab5Root: any = 'AdminPage';\r\n  tab6Root: any = 'FormViewPage';\r\n  tab10Root: any = 'UnionsPage';\r\n  tab11Root: any = 'OpPage';\r\n\r\n\r\n\r\n  constructor(public translate: TranslateService, private database: PouchdbProvider, private zone: NgZone) {\r\n    this.translate.setDefaultLang(global.langue)\r\n  }\r\n\r\n  public ionViewDidEnter() {\r\n    this.translate.use(global.langue)\r\n    //console.log('syncing database')\r\n    //this.database.sync();\r\n    this.initFilter();\r\n    this.getConfig();\r\n    this.database.getChangeListener().subscribe(data => {\r\n      this.zone.run(() => {\r\n        //this.items.push(data.doc);\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  getConfig(){\r\n    this.database.getDocById('config-app').then((c) => {\r\n      if(c){\r\n          global.config_app.nom_structure = c.data.nom_structure;\r\n          global.config_app.code_structure = c.data.code_structure\r\n        }\r\n    }).catch((err) => console.log(err));\r\n  }\r\n\r\n  initFilter(){\r\n    this.database.getDocById('_design/filtrerDoc').then((c) => {\r\n      if(!c){\r\n          this.ajouterLoalDesignDoc()\r\n        }\r\n    }).catch((err) => this.ajouterLoalDesignDoc());\r\n  }\r\n\r\n\r\n  \r\n  ajouterLoalDesignDoc(){\r\n    let filter_doc: any = {\r\n      //Prend en parametre un tableau contenant la liste des code des union\r\n          _id: '_design/filtrerDoc',\r\n          filters: {\r\n            myfilter: function (doc, req) {\r\n              var public_doc_type = ['pays', 'region', 'commune', 'departement', 'village', 'type-sole', 'variete', 'culture', 'config-app'];\r\n              var doc_pour_union_type = ['union', 'op', 'membre_op', 'champs', 'typologie', 'essai'];\r\n              var doc_pour_protocole_type = ['protocole', 'culture-protocole', 'traitement'];\r\n              \r\n               \r\n              /*//tous le monde a acces au filtre\r\n              if(doc._id == '_design/filtrerDoc'/* || doc._deleted*****){\r\n                return 1;\r\n              }else*/\r\n              //seul l'admin à accès à la totalité des inforamtions de la base de donnée\r\n              if(doc._id == '_design/filtrerDoc' || (req.query.roles && req.query.roles.length && (req.query.roles.indexOf('admin') != -1) || (req.query.roles.indexOf('_admin') != -1))){\r\n                return 1\r\n              }else \r\n              //si pas moderateur\r\n              if(req.query.roles.indexOf('moderateur') === -1){\r\n\r\n                //localité et photos\r\n                if(doc.type){\r\n                  //acceder aux localités\r\n                  if(public_doc_type.indexOf(doc.type) !== -1){\r\n                    return 1;\r\n                  }\r\n\r\n                  //acceder aux photo des membres des unions autorisé\r\n                  else if(doc.type == 'photo'){\r\n                    //au cas ou la liste des ops est définie\r\n                    if(req.query.codes_ops && req.query.codes_ops.length > 0 && doc.code_op){\r\n                      return req.query.codes_ops.indexOf(doc.code_op) !== -1;\r\n                    } else // la liste des unions seulement\r\n                    if(req.query.codes_unions && req.query.codes_unions.length > 0 && doc.code_union){\r\n                      return req.query.codes_unions.indexOf(doc.code_union) !== -1;\r\n                    }/*else if(req.query.codes_unions && req.query.codes_unions.length > 0 && (!doc.code_union || doc.code_union == '')){\r\n                      //pour les documement qu nom pas de code_union, les retoruner\r\n                      return 1;\r\n                    }*/\r\n                  }else{\r\n                    //return 'doc type probleme => '+doc._id\r\n                    throw({forbidden: 'doc type probleme => '+doc._id})\r\n                  }\r\n                }\r\n                \r\n                \r\n                //traitements, unions, ops, membres, champs, essais, protocole\r\n                else if(doc.data && doc.data.type){\r\n                  //pluviometrie par site\r\n                  if(doc.data.type == 'pluviometrie' && req.query.sites && req.query.sites.length > 0){\r\n                    return req.query.sites.indexOf(doc.data.commune + '-' + doc.data.commune_nom) !== -1;\r\n                  }else\r\n                  //acceder aux type de sole et variétés\r\n                  if(public_doc_type.indexOf(doc.data.type) !== -1){\r\n                    return 1;\r\n                  }else \r\n                  //fitre du protocole\r\n                  if(doc_pour_protocole_type.indexOf(doc.data.type) !== -1){\r\n                    //si filtre défini\r\n                    if(req.query.codes_protocoles && req.query.codes_protocoles.length > 0 && doc.data.type == 'protocole'){\r\n                      //cas du protocole\r\n                      return req.query.codes_protocoles.indexOf(doc.data.code) !== -1;\r\n                    }else\r\n                    if(req.query.codes_protocoles && req.query.codes_protocoles.length > 0 && doc.data.type != 'protocole'){\r\n                      //cas des traitements et culture protocole\r\n                      return req.query.codes_protocoles.indexOf(doc.data.code_protocole) !== -1;\r\n                    }else\r\n                    //si non défini\r\n                      return 1;\r\n                  }else\r\n                  //acceder aux unions, ops, traitements, protocoles, membres, champs, essais et typologie autorisés à l'utilisateur à ltravers le code union\r\n                  if(doc_pour_union_type.indexOf(doc.data.type) != -1){\r\n                    \r\n                     //au cas ou la liste des ops est définie\r\n                      if(req.query.codes_unions && req.query.codes_unions.length > 0 && req.query.codes_ops && req.query.codes_ops.length > 0 && doc.data.code_op){\r\n                        //pour les essais si le protocole est défini\r\n                        if(doc.data.type == 'essai' && req.query.codes_protocoles && req.query.codes_protocoles.length > 0){\r\n                          return (req.query.codes_unions.indexOf(doc.data.code_union) !== -1 && req.query.codes_ops.indexOf(doc.data.code_op) !== -1 && req.query.codes_protocoles.indexOf(doc.data.code_protocole) !== -1);\r\n                        }else{\r\n                          return (req.query.codes_unions.indexOf(doc.data.code_union) !== -1 && req.query.codes_ops.indexOf(doc.data.code_op) !== -1);\r\n                        }\r\n                      } else // la liste des unions seulement\r\n                      if(req.query.codes_unions && req.query.codes_unions.length > 0 && doc.data.code_union){\r\n\r\n                        //au cas ou la liste des ops est définie\r\n                      //if(req.query.codes_ops && req.query.codes_ops.length > 0 && doc.data.code_op){\r\n                        //pour les essais si le protocole est défini\r\n                        if(doc.data.type == 'essai' && req.query.codes_protocoles && req.query.codes_protocoles.length > 0){\r\n                          return (req.query.codes_unions.indexOf(doc.data.code_union) !== -1 && req.query.codes_protocoles.indexOf(doc.data.code_protocole) !== -1);\r\n                        }else{\r\n                          return req.query.codes_unions.indexOf(doc.data.code_union) !== -1;\r\n                        }\r\n                      //}\r\n                      /*else if(req.query.codes_unions && req.query.codes_unions.length > 0 && (!doc.data.code_union || doc.data.code_union == '')){\r\n                      //pour les documement qu nom pas de code_union, les retoruner\r\n                      return 1;\r\n                      }*/\r\n                  }else{\r\n                    //throw({forbidden: 'doc.data ou doc.data.type => '+doc._id})\r\n                    //return 'doc.data'\r\n                  }\r\n                }else{\r\n                  //throw({forbidden: 'erreur incomprise => '+doc._id})\r\n                }\r\n\r\n                //fin public doc\r\n                \r\n              }//fin data doc\r\n            }//fin user filter\r\n            }.toString()\r\n          }\r\n        }\r\n\r\n        this.database.getDocById('_design/filtrerDoc').then((doc) => {\r\n          if(doc && doc._id){\r\n            //doc existe\r\n            //this.database.remote(doc)\r\n            filter_doc._id = '_design/filtrerDoc';\r\n            filter_doc._rev = doc._rev;\r\n            this.database.createSimpleDocReturn(filter_doc);//.then((res) => alert('Filter mise à jour avec succes')).catch((err) => alert('erreur mise à jour du filter du filter => '+err));\r\n          }else{\r\n            //créer le filtre de base\r\n            //this.ajouterDesignDoc();\r\n            filter_doc._id = '_design/filtrerDoc';\r\n            this.database.createSimpleDocReturn(filter_doc);//.then((res) => alert('Filter ajouté avec succes')).catch((err) => alert('erreur ajout du filter => '+err));\r\n          }\r\n          \r\n        }).catch((err) => {\r\n          //alert(err)\r\n          //this.ajouterDesignDoc();\r\n          filter_doc._id = '_design/filtrerDoc';\r\n          this.database.createSimpleDocReturn(filter_doc);//.then((res) => alert('Filter ajouté avec succes')).catch((err) => alert('erreur ajout du filter '+err));\r\n        });\r\n    \r\n\r\n        //global.remoteSaved.put(filter_doc).catch((err) => alert('erreur vers server '+err));\r\n        //this.database.put(doc, doc._id).catch((err) => alert('erreur vers local '+err));\r\n      }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TabsPage } from './tabs';\r\n//import { TranslationModule } from '../../translation/translate.module'\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  declarations: [TabsPage],\r\n  imports: [TranslateModule, IonicPageModule.forChild(TabsPage)],\r\n  exports: [TabsPage]\r\n})\r\nexport class TabsPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.module.ts"],"sourceRoot":""}