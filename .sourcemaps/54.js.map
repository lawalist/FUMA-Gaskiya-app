{"version":3,"sources":["../../src/pages/localite/ajouter-departement/ajouter-departement.ts","../../src/pages/localite/ajouter-departement/ajouter-departement.module.ts"],"names":[],"mappings":"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","file":"54.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, NavParams, IonicPage, ToastController, LoadingController, AlertController, ViewController, MenuController, Events } from 'ionic-angular';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { PouchdbProvider } from '../../../providers/pouchdb-provider';\n\n/**\n * Generated class for the AjouterDepartementPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-ajouter-departement',\n  templateUrl: 'ajouter-departement.html',\n})\nexport class AjouterDepartementPage {\n  departementForm: any;\n  departement: any;\n  allDepartement: any = [];\n  nom_region: any;\n  id_region: any;\n  id: any = '';\n  nom: any = '';\n\n  //allRegions: any = [];\n  ancien_nom: any = '';\n  ancien_id: any = '';\n\n  liste: boolean = false;\n  ajouter:boolean = true;\n  modifier: boolean = false;\n  region_defini: boolean = false;\n  allRegion: any = [];\n  gestion_departement: boolean = false;\n  \n  constructor(public navCtrl: NavController, public loadingCtl: LoadingController, public alertCtl: AlertController, public menuCtl: MenuController, public viewCtrl: ViewController, public navParams: NavParams,public toastCtl: ToastController, public servicePouchdb: PouchdbProvider, public formBuilder: FormBuilder) {\n  \n\n    if(this.navParams.data.liste){\n      this.liste = true;\n      this.gestion_departement = true;\n      this.ajouter = false;\n    }\n\n    if(this.navParams.data.id_region){\n      this.id_region = this.navParams.data.id_region;\n      this.nom_region = this.navParams.data.nom_region;\n      this.region_defini = true;\n    }\n    \n    \n    this.departementForm = this.formBuilder.group({\n      id:['', Validators.required],\n      nom:['', Validators.required],\n      id_region:[''],\n      nom_region:[''],\n    });\n  }\n\n  ionViewDidEnter() {\n     this.servicePouchdb.getDocById('departement').then((departement) => {\n       this.allDepartement = departement.data;\n       this.departement = departement;\n       //alert(this.pays._id)\n     });\n\n     this.servicePouchdb.getDocById('region').then((regions) => {\n          this.allRegion = regions.data;\n        });\n  }\n\n  //fait la conbinaison de caractere de gauche vers la droite en variant la taille a la recherche d'un code disponible\n  genererID(){\n    \n    let nom = this.nom;\n     nom = nom.replace(' ' || '  ' || '    ' || '     ' || '      ' , '');\n     let taille_nom = nom.length;\n     let an = nom;\n    //taille initiale: deux aractères\n    let taille_code = 2;\n    let code: string = '';\n    this.id = code.toUpperCase()\n    let p = 0;\n    let last_position = 0;\n    let trouve: boolean;\n\n    if(taille_nom >= 2){\n      while(taille_code <= taille_nom){\n        last_position = taille_code - 1;\n        trouve  = false;\n        code = '';\n        for(let i = 0; i < taille_code; i++){\n          code += nom.charAt(i).toString() ;\n        }\n\n        do{\n            code = code.substr(0, code.length - 1);\n            code += nom.charAt(last_position).toString() ;\n            p = 0;\n            for(let pos=0; pos < this.allDepartement.length; pos++){\n              let rg = this.allDepartement[pos];\n              if(rg.id === code.toUpperCase()){\n                trouve = true;\n                break ;\n              }else{\n                trouve = false;\n              }\n            }\n            \n            last_position++;\n\n          }while(trouve && last_position < taille_nom);\n          //\n          if(last_position === taille_nom && trouve){\n            //non disponible, augmenter la taille du code\n            taille_code++;\n        \n            //au cas ou on teste toutes les combinaisons, sant trouver de combinaison disponible, on ajoute des chiffre\n            if(taille_code > taille_nom){\n              //non disponible, augmenter la taille et utiliser des chiffres\n              taille_code = 3;\n              nom = an + '123456789'.toString();\n              taille_nom = nom.length;\n            }\n          }else{\n              this.id = code.toUpperCase();\n              break;\n            \n          }\n      }\n      \n    }\n    \n  }\n\n   verifierUniqueNon(departement){\n    let res = 1;\n    this.allDepartement.forEach((p, index) => {\n      if((departement.nom.toString().toUpperCase() === p.nom.toString().toUpperCase())){\n        res = 0;\n      }\n    });\n\n    return res;\n  }\n\n\n /* ajouter(){\n    \n    let departement = this.departementForm.value;\n  //  if(this.verifierUniqueNon(region) === 0){\n    //  alert('Les noms des régions doivent être uniques!');\n    //}else{\n      let data = [];\n      data = this.departement.data;\n      data.push(departement);\n      this.departement.data = data;\n      this.servicePouchdb.updateLocalite(this.departement);\n      let toast = this.toastCtl.create({\n        message: 'Departement bien enregistré!',\n        position: 'top',\n        duration: 3000\n      });\n\n      toast.present();\n      this.viewCtrl.dismiss();\n  //  }\n  } */\n\n\n\n    actionForm(){\n      let departement = this.departementForm.value;\n    if(this.ajouter){\n        \n      if(this.verifierUniqueNon(departement) === 0){\n        alert('Les noms des departement doivent être uniques!');\n      }else{\n\n        //let region = this.regionForm.value;\n  //  if(this.verifierUniqueNon(region) === 0){\n    //  alert('Les noms des régions doivent être uniques!');\n    //}else{\n        let data = [];\n        data = this.departement.data;\n        if(!this.region_defini){\n          departement.id_region = this.id_region.id;\n          departement.nom_region = this.id_region.nom;\n        }\n        data.push(departement);\n        this.departement.data = data;\n        this.departement.type = 'departement';\n        this.allDepartement = data;\n        this.servicePouchdb.updateLocalite(this.departement).then((res) => {\n          this.departement._rev = res.rev;\n        })\n        let toast = this.toastCtl.create({\n          message: 'Departement bien enregistré!',\n          position: 'top',\n          duration: 1000\n        });\n\n        toast.present();\n        this.ajouter = false;\n\n        if(!this.gestion_departement){\n          this.viewCtrl.dismiss();\n        }else{\n          this.liste = true;\n          this.ajouter = false;\n        }\n      }\n    }else if(this.modifier){\n      let loading = this.loadingCtl.create({\n        content: 'Application des changements en cours...'\n      });\n\n      //loading.present();\n      //let region = this.regionForm.value;\n      if(!this.region_defini){\n        departement.id_pays = this.id_region.id;\n        departement.nom_pays = this.id_region.nom;\n      }\n      this.allDepartement.forEach((d, i) => {\n        if(d.id === departement.id){\n          this.allDepartement[i] = departement;\n        }\n      });\n\n      this.departement.data = this.allDepartement;\n      //this.allPays.splice(this.pays.indesOf())\n      //this.servicePouchdb.updateLocalite(this.departement);\n      this.servicePouchdb.updateLocalite(this.departement).then((res) => {\n          this.departement._rev = res.rev;\n      })\n        //recuperer tous les doc pour modifier le nom du pays\n       /* this.servicePouchdb.getPlageDocsRapide('fuma', 'fuma:\\uffff').then((allDocs) => {\n          allDocs.map((doc) => {\n            //pour les essais\n            ****if(doc.doc.data.type === 'essai' && doc.doc.data.village_producteur === this.ancien_nom ){\n              doc.doc.data0village_producteur = pays.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }else ******\n            //pour les memebres\n            if(doc.doc.data.type === 'membre_op' && doc.doc.data.departement === this.ancien_id ){\n              doc.doc.data.departement_nom = departement.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }\n            else \n            //pour les union\n            if(doc.doc.data.type === 'union' && doc.doc.data.departement === this.ancien_id ){\n              doc.doc.data.departement_nom = departement.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }\n            else \n            //pour les op\n            if(doc.doc.data.type === 'op' && doc.doc.data.departement === this.ancien_id ){\n              doc.doc.data.departement_nom = departement.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }\n           ***** else \n            //pour les champs\n            if(doc.doc.data.type === 'champs' && doc.doc.data.village === this.ancien_nom ){\n              doc.doc.data.village = pays.nom;\n              this.servicePouchdb.updateDoc(doc.doc);\n            }*****\n          });\n\n           let toast = this.toastCtl.create({\n              message: 'Departement bien modifier!',\n              position: 'top',\n              duration: 1000\n            });\n            toast.present();  \n            loading.dismissAll();\n        });*/\n\n        let toast = this.toastCtl.create({\n              message: 'Departement bien modifier!',\n              position: 'top',\n              duration: 1000\n            });\n            toast.present();\n      \n        this.ajouter = false;\n        this.modifier = false;\n        this.liste = true;\n    }\n  } \n\najouterDepartement(){\n  this.id = '';\n  this.nom = '';\n  this.id_region = '';\n  this.nom_region = '';\n    this.liste = false;\n    this.ajouter = true;\n  }\n\n  modifierDepartement(departement){\n\n    this.id = departement.id;\n    this.nom = departement.nom;\n    this.id_region = departement.id_region;\n    this.nom_region = departement.nom_region;\n    this.ancien_nom = this.nom;\n    this.ancien_id = this.id;\n    this.liste = false;\n    this.modifier = true;\n\n    this.allRegion.forEach((region) => {\n      if(this.id_region === region.id){\n        this.id_region = region;\n      }\n    })\n  }\n\n  supprimerDepartement(departement){\n    let e: any = {};\n    let alert = this.alertCtl.create({\n      title: 'Suppression Departement',\n      message: 'Etes vous sûr de supprimer ce departement ?',\n      buttons:[\n        {\n          text: 'Non',\n          handler: () => console.log('suppression annulée')\n \n        },\n        {\n          text: 'Oui',\n          handler: () => {\n            this.allDepartement.forEach((r, i) => {\n              if(r.id === departement.id){\n                this.allDepartement.splice(i, 1);\n              }\n            });\n\n            this.departement.data = this.allDepartement;\n            //this.allPays.splice(this.pays.indesOf())\n            //this.servicePouchdb.updateLocalite(this.departement);\n            this.servicePouchdb.updateLocalite(this.departement).then((res) => {\n              this.departement._rev = res.rev;\n            })\n            let toast = this.toastCtl.create({\n              message: 'Departement bien suprimé!',\n              position: 'top',\n              duration: 1000\n            });\n            toast.present();           \n          }\n        }\n      ]\n    });\n\n    alert.present();\n  }\n\n  annuler(){\n    if(this.gestion_departement){\n      if(this.liste){\n        this.viewCtrl.dismiss();\n      }else if(this.ajouter){\n        this.liste = true;\n        this.ajouter = false;\n      } else{\n        this.liste = true;\n        this.modifier = false;\n      }\n\n    }else{\n      this.viewCtrl.dismiss();\n    }\n     \n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/localite/ajouter-departement/ajouter-departement.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AjouterDepartementPage } from './ajouter-departement';\n\n@NgModule({\n  declarations: [\n    AjouterDepartementPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AjouterDepartementPage),\n  ],\n  exports: [\n    AjouterDepartementPage\n  ]\n})\nexport class AjouterDepartementPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/localite/ajouter-departement/ajouter-departement.module.ts"],"sourceRoot":""}